# Rent Scheduler

This Ruby class generates rent payment schedules based on frequency,
handles rent changes over time, and incorporates varying payment methods
with processing delays.

---

## Features

- Generate rent schedules by frequency (weekly, fortnightly, monthly)
- Apply rent changes with effective dates
- Support multiple rent changes

---

## Usage

```ruby
rent = {
  amount: 1000,
  frequency: "monthly",
  start_date: "2024-01-01",
  end_date: "2024-04-01",
  payment_method: "credit_card"
}

rent_changes = [
  { amount: 1200, effective_date: "2024-02-15" }
]

scheduler = RentScheduler.new(rent, rent_changes)
scheduler.generate_schedule
```

---

## Output Example

```ruby
[
  { payment_date: "2023-12-30", amount: 1000, method: "credit_card" },
  { payment_date: "2024-01-30", amount: 1000, method: "credit_card" },
  { payment_date: "2024-02-28", amount: 1200, method: "credit_card" }
]
```

---

## Assumptions

### ✅ Start Date
- `start_date` is **required**. An error will be raised if it's missing.

### ✅ End Date
- `end_date` is **optional**. If missing, a maximum of 12 occurrences will be generated by default.

### ✅ Frequency Options
- Only accepts: `"weekly"`, `"fortnightly"`, or `"monthly"`.
- Invalid values raise an error.

### ✅ Rent Changes
- Sorted by `effective_date`.
- Applied from the **first full period on or after** the `effective_date`.

### ✅ Processing Delays by Method
| Method            | Processing Days |
|-------------------|-----------------|
| `instant`         | 0               |
| `credit_card`     | 2               |
| `bank_transfer`   | 3               |

- Payment dates are calculated **backwards** based on these delays.

### ✅ Date Alignment
- Dates are adjusted to the correct calendar day based on rent frequency.
- Example: Jan 31 → Feb 28/29 → Mar 31, etc.

### ✅ No Proration
- Rent changes are not prorated.
- They take effect at the **start** of a new rent period.

### ✅ Non-overlapping Changes
- Each `rent_change` is assumed to apply in sequence.
- Overlapping changes on the same `effective_date` are not handled.

---

## Testing

To run the tests:

```bash
ruby test/rent_scheduler_test.rb
```